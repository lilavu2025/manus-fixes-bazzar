# ุฏููู ุฅุนุฏุงุฏ ุงููุตุงุฏูุฉ ุจุงููุงุชู ูGoogle OAuth

> โ๏ธ **ููุงุญุธุฉ ูููุฉ**: ูุตุงุฏูุฉ ุงููุงุชู ูุนุทูุฉ ุญุงููุงู ูุฃููุง ุชุญุชุงุฌ ูุญุณุงุจ Twilio ูุฏููุน. ูููู ุชูุนูููุง ูุงุญูุงู ุนูุฏ ุงูุญุงุฌุฉ.

## ุงูููุฒุงุช ุงููุชุงุญุฉ ุญุงููุงู โ

- ๐ง **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: ูุชุงุญ ููุนูู ุจุดูู ุทุจูุนู
- ๐ **Google OAuth**: ูุชุงุญ ููุญุชุงุฌ ุฅุนุฏุงุฏ Google Cloud Console
- ๐ฑ **ุงููุงุชู**: ูุนุทู ูุคูุชุงู (ูุญุชุงุฌ Twilio ูุฏููุน)

---

## ุฅุนุฏุงุฏ ูุตุงุฏูุฉ ุงููุงุชู ูู Supabase (ูุนุทู ุญุงููุงู)

### 1. ุชูุนูู ูุตุงุฏูุฉ ุงููุงุชู
1. ุงุฐูุจ ุฅูู ููุญุฉ ุชุญูู Supabase: https://supabase.com/dashboard
2. ุงุฎุชุฑ ูุดุฑูุนู (gcjqjcuwsofzrgohwleg)
3. ุงูุชูู ุฅูู Authentication > Settings
4. ูู ูุณู "Phone Auth" ูู ุจูุง ููู:
   - ูุนูู "Enable phone confirmations"
   - ุงุฎุชุฑ ูุฒูุฏ ุฎุฏูุฉ SMS (Twilio ููุตู ุจู)

### 2. ุฅุนุฏุงุฏ Twilio (ูุฑุณุงุฆู SMS)
1. ุณุฌู ุญุณุงุจ ูู Twilio: https://www.twilio.com
2. ุงุญุตู ุนูู:
   - Account SID
   - Auth Token
   - Phone Number
3. ูู Supabaseุ ุฃุฏุฎู ุจูุงูุงุช Twilio:
   - Twilio Account SID
   - Twilio Auth Token
   - Twilio Phone Number

### 3. ุฅุนุฏุงุฏ ุงูููุงูุจ (Templates)
ูู Supabaseุ ูู ุจุชุฎุตูุต ุฑุณุงูุฉ SMS:
```
ุฑูุฒ ุงูุชุญูู ุงูุฎุงุต ุจู ูู: {{ .Token }}
ุตุงูุญ ููุฏุฉ 5 ุฏูุงุฆู
```

## ุฅุนุฏุงุฏ Google OAuth ูู Supabase

### 1. ุฅูุดุงุก ูุดุฑูุน Google Cloud
1. ุงุฐูุจ ุฅูู: https://console.cloud.google.com
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุฎุชุฑ ูุดุฑูุน ููุฌูุฏ
3. ูุนูู Google+ API ูู Library

### 2. ุฅูุดุงุก ุจูุงูุงุช ุงุนุชูุงุฏ OAuth
1. ุงูุชูู ุฅูู Credentials
2. ุงุถุบุท "Create Credentials" > "OAuth 2.0 Client IDs"
3. ุงุฎุชุฑ "Web application"
4. ุฃุถู Authorized redirect URIs:
   ```
   https://gcjqjcuwsofzrgohwleg.supabase.co/auth/v1/callback
   http://localhost:8080/auth/v1/callback
   ```

### 3. ุฅุนุฏุงุฏ Supabase OAuth
1. ูู Supabase Dashboardุ ุงูุชูู ุฅูู Authentication > Settings
2. ูู ูุณู "Auth Providers"ุ ูุนูู Google
3. ุฃุฏุฎู:
   - Google Client ID
   - Google Client Secret

### 4. ุฅุนุฏุงุฏ OAuth Consent Screen
1. ูู Google Cloud Consoleุ ุงูุชูู ุฅูู "OAuth consent screen"
2. ุงููุฃ ุงููุนูููุงุช ุงููุทููุจุฉ:
   - App name: ูุชุฌุฑ ุงููุฏููุฉ
   - User support email
   - Developer contact information
3. ุฃุถู ุงููุทุงูุงุช (Scopes):
   - email
   - profile
   - openid

## ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ

### ุฅุนุฏุงุฏ Site URL
ูู Supabase Authentication Settings:
- Site URL: `https://yourdomain.com` (ูู ุงูุฅูุชุงุฌ)
- Additional redirect URLs: 
  ```
  http://localhost:8080
  https://yourdomain.com
  ```

### ุฅุนุฏุงุฏ Rate Limiting (ุชุญุฏูุฏ ูุนุฏู ุงูุทูุจุงุช)

**ุงููุฏู**: ููุน ุฅุฑุณุงู ุฑุณุงุฆู ูุซูุฑุฉ ูููุณ ุงููุณุชุฎุฏู ูุชุฌูุจ ุงูุฅุณุงุกุฉ ูุงูุชูุงููู ุงูุฒุงุฆุฏุฉ.

#### ุงูุฎุทูุงุช ุงูุชูุตูููุฉ:

1. **ุงูุชูู ุฅูู ููุญุฉ ุชุญูู Supabase**:
   - ุงุฐูุจ ุฅูู: https://supabase.com/dashboard
   - ุงุฎุชุฑ ูุดุฑูุนู (gcjqjcuwsofzrgohwleg)

2. **ุงูุชูู ุฅูู ุฅุนุฏุงุฏุงุช ุงููุตุงุฏูุฉ**:
   ```
   Dashboard โ Authentication โ Settings
   ```

3. **ุงุจุญุซ ุนู ูุณู "Security and user management"**:
   - ุงุณุญุจ ูุฃุณูู ุญุชู ุชุฌุฏ "Rate limits"
   - ุฃู ุงุจุญุซ ุนู "Security settings"

4. **ุฅุนุฏุงุฏ Email Rate Limiting**:
   ```
   Email rate limit: 5 requests per 5 minutes
   ```
   - ุงุจุญุซ ุนู "Email rate limit"
   - ุถุน ุงููููุฉ: `5` ูู ุฎุงูุฉ "requests"
   - ุถุน ุงููููุฉ: `300` ูู ุฎุงูุฉ "seconds" (5 ุฏูุงุฆู = 300 ุซุงููุฉ)

5. **ุฅุนุฏุงุฏ SMS Rate Limiting** (ุนูุฏ ุชูุนูู ุงููุงุชู):
   ```
   SMS rate limit: 5 requests per 5 minutes
   ```
   - ุงุจุญุซ ุนู "SMS rate limit" ุฃู "Phone rate limit"
   - ุถุน ููุณ ุงูููู: `5` requests per `300` seconds

#### ุฅุฐุง ูู ุชุฌุฏ ุงูุฅุนุฏุงุฏุงุช:

**ุงูุทุฑููุฉ ุงูุจุฏููุฉ - ุงุณุชุฎุฏุงู SQL:**

1. **ุงูุชูู ุฅูู SQL Editor**:
   ```
   Dashboard โ SQL Editor โ New query
   ```

2. **ุชุดุบูู ุงูููุฏ ุงูุชุงูู**:
   ```sql
   -- ุฅุนุฏุงุฏ rate limiting ููุฅูููู
   INSERT INTO auth.config (parameter, value) 
   VALUES ('email_rate_limit', '5') 
   ON CONFLICT (parameter) DO UPDATE SET value = '5';
   
   INSERT INTO auth.config (parameter, value) 
   VALUES ('email_rate_limit_per', '300') 
   ON CONFLICT (parameter) DO UPDATE SET value = '300';
   
   -- ุฅุนุฏุงุฏ rate limiting ูููุงุชู (ุนูุฏ ุงูุชูุนูู)
   INSERT INTO auth.config (parameter, value) 
   VALUES ('sms_rate_limit', '5') 
   ON CONFLICT (parameter) DO UPDATE SET value = '5';
   
   INSERT INTO auth.config (parameter, value) 
   VALUES ('sms_rate_limit_per', '300') 
   ON CONFLICT (parameter) DO UPDATE SET value = '300';
   ```

3. **ุงุถุบุท "Run" ูุชุดุบูู ุงูููุฏ**

#### ููุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช:

**ุชุดุบูู ุงุณุชุนูุงู ููุชุญูู:**
```sql
SELECT parameter, value 
FROM auth.config 
WHERE parameter LIKE '%rate_limit%';
```

#### ุงูููู ุงูููุตู ุจูุง:

| ููุน ุงููุตุงุฏูุฉ | ุนุฏุฏ ุงูุทูุจุงุช | ุงููุฏุฉ ุงูุฒูููุฉ | ุงูุบุฑุถ |
|-------------|------------|-------------|-------|
| Email | 5 | 5 ุฏูุงุฆู | ููุน ุฅุณุงุกุฉ ุงูุจุฑูุฏ |
| SMS | 5 | 5 ุฏูุงุฆู | ุชูููุฑ ุชูุงููู ุงูุฑุณุงุฆู |
| Password Reset | 3 | 10 ุฏูุงุฆู | ุญูุงูุฉ ุฅุถุงููุฉ |

#### ููุงุญุธุงุช ูููุฉ:

โ๏ธ **ุชุญุฐูุฑ**: 
- ูุฐู ุงูุฅุนุฏุงุฏุงุช ุชุทุจู ุนูู ูุณุชูู ุงููุดุฑูุน ุจุงููุงูู
- ุชุฃุซุฑ ุนูู ุฌููุน ุงููุณุชุฎุฏููู
- ุงุฎุชุจุฑ ุงูุฅุนุฏุงุฏุงุช ูุจู ุงููุดุฑ ูู ุงูุฅูุชุงุฌ

โ **ูุตุงุฆุญ**:
- ุงุจุฏุฃ ุจููู ูุชุณุงููุฉ ุซู ููููุง ุชุฏุฑูุฌูุงู
- ุฑุงูุจ logs ููุชุฃูุฏ ูู ุนุฏู ุญุฌุจ ูุณุชุฎุฏููู ุดุฑุนููู
- ูููู ุชุนุฏูู ุงูููู ูู ุฃู ููุช

## ุงุฎุชุจุงุฑ ุงูุฅุนุฏุงุฏุงุช

### โ ุงุฎุชุจุงุฑ ูุตุงุฏูุฉ ุงููุงุชู (ูุนุทู ุญุงููุงู)
ูุตุงุฏูุฉ ุงููุงุชู ูุนุทูุฉ ูุคูุชุงู ูุฃููุง ุชุญุชุงุฌ:
- ุญุณุงุจ Twilio ูุฏููุน ($)
- ุฑุตูุฏ ูุงูู ูุฅุฑุณุงู ุฑุณุงุฆู SMS
- ุฅุนุฏุงุฏ ูุนูุฏ ููุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ

**ูุชูุนูููุง ูุงุญูุงู:**
1. ุฃูุดุฆ ุญุณุงุจ Twilio ูุฏููุน
2. ุงุชุจุน ุงูุฎุทูุงุช ุงููุฐููุฑุฉ ุฃุนูุงู
3. ูุนูู `showPhoneAuth = true` ูู ุงูููุฏ

### โ ุงุฎุชุจุงุฑ Google OAuth
1. ุงุถุบุท ุนูู "ุชุณุฌูู ุงูุฏุฎูู ุจู Google"
2. ุชุฃูุฏ ูู ุธููุฑ ูุงูุฐุฉ Google
3. ุฌุฑุจ ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ Google

## ููุงุญุธุงุช ุฃูููุฉ

1. **ุฃุฑูุงู ุงูููุงุชู ุงููุฏุนููุฉ**: ูุนุทู ุญุงููุงูุ ุณูุฏุนู ุฃุฑูุงู ุฅุณุฑุงุฆูููุฉ (05xxxxxxxx) ุนูุฏ ุงูุชูุนูู
2. **ุญูุงูุฉ ูู ุงูุฅุณุงุกุฉ**: Supabase ูููุฑ ุญูุงูุฉ ุชููุงุฆูุฉ
3. **ุชุฎุฒูู ุขูู**: ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจุชุดููุฑ SSL/TLS
4. **ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฑููุฒ**: ุณูููู 5 ุฏูุงุฆู ุนูุฏ ุชูุนูู ูุตุงุฏูุฉ ุงููุงุชู

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### โ ูุดุงูู ูุตุงุฏูุฉ ุงููุงุชู (ูุนุทู ุญุงููุงู)
- ูุตุงุฏูุฉ ุงููุงุชู ูุนุทูุฉ ูู ุงูููุฏ ูุชุฌูุจ ุงูุชูุงููู
- ููุชูุนูู: ูู ุจุชุนุฏูู `showPhoneAuth = true` ุจุนุฏ ุฅุนุฏุงุฏ Twilio

### โ ูุดุงูู ุดุงุฆุนุฉ ูู Google OAuth
- **ุฎุทุฃ redirect_uri**: ุชุฃูุฏ ูู ุฅุถุงูุฉ URL ุงูุตุญูุญ
- **ุฎุทุฃ client_id**: ุชุฃูุฏ ูู ูุณุฎ Client ID ุจุดูู ุตุญูุญ
- **ุฎุทุฃ ูู ุงููุทุงูุงุช**: ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงููุทุงูุงุช ุงููุทููุจุฉ

## ูุชุทูุจุงุช ุงูุฅูุชุงุฌ

ูุจู ุงููุดุฑ ูู ุงูุฅูุชุงุฌ:
1. ุงุณุชุจุฏู localhost ุจุงูุฏูููู ุงูุญูููู
2. ูุนูู SSL/HTTPS
3. ุฑุงุฌุน ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
4. ุงุฎุชุจุฑ ุฌููุน ูุธุงุฆู ุงููุตุงุฏูุฉ
5. ุชุฃูุฏ ูู ุนูู ุงูุฅุดุนุงุฑุงุช
